warning: in the working copy of 'app/api/quotes/route.ts', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/app/api/quotes/route.ts b/app/api/quotes/route.ts[m
[1mindex c50fd88c..b3454150 100644[m
[1m--- a/app/api/quotes/route.ts[m
[1m+++ b/app/api/quotes/route.ts[m
[36m@@ -119,6 +119,28 @@[m [mexport async function POST(request: Request) {[m
 [m
       const prismaCode = error?.code;[m
       const prismaMeta = error?.meta;[m
[32m+[m[32m      if (prismaCode === "P2021") {[m
[32m+[m[32m        let host = "unknown";[m
[32m+[m[32m        try {[m
[32m+[m[32m          host = new URL(String(process.env.DATABASE_URL)).host;[m
[32m+[m[32m        } catch {[m
[32m+[m[32m          // ignore parse failures[m
[32m+[m[32m        }[m
[32m+[m[32m        return jsonResponse([m
[32m+[m[32m          {[m
[32m+[m[32m            ok: false,[m
[32m+[m[32m            error: "prisma_error",[m
[32m+[m[32m            message: `DB tables missing; run migrations on this DATABASE_URL host: ${host}`,[m
[32m+[m[32m            prisma: { code: prismaCode, meta: prismaMeta ?? null },[m
[32m+[m[32m            details:[m
[32m+[m[32m              process.env.NODE_ENV !== "production"[m
[32m+[m[32m                ? String(error?.stack || error)[m
[32m+[m[32m                : undefined,[m
[32m+[m[32m          },[m
[32m+[m[32m          500[m
[32m+[m[32m        );[m
[32m+[m[32m      }[m
[32m+[m
       const message =[m
         prismaCode && process.env.NODE_ENV === "production"[m
           ? "Unable to save quote right now"[m
